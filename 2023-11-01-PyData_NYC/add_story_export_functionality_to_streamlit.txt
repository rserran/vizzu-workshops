from ipyvizzustory import Slide, Step
------------
if "story" not in st.session_state:
    st.session_state.story = Story(data)
st.session_state.story.set_feature("tooltip", True)

if "lastanim" not in st.session_state:
    st.session_state.lastanim = []
------------
st.session_state.lastanim = [Data.filter(filter), Config(config), style]
----------
save_all = st.checkbox("Save all", value=True)
save_button = st.button("Save animation")
if st.session_state.lastanim:
    if save_all:
        st.session_state.story.add_slide(Slide(Step(*st.session_state.lastanim)))
    else:
        if save_button:
            st.session_state.story.add_slide(Slide(Step(*st.session_state.lastanim)))

download_button = st.download_button(
    label="Download Story",
    data=st.session_state.story.to_html(),
    file_name="story.html",
    mime="text/html",
)
